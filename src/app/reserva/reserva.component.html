<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      
      <!------------------------- AGREGAR RESERVA--------------------------->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Agregar reserva</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!--*********************-->
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field>
                    <input matInput [matDatepicker]="picker03" (click)="picker.open()" [(ngModel)]="fechaDesde"
                      placeholder="Fecha desde">
                    <mat-datepicker-toggle matSuffix [for]="picker03"></mat-datepicker-toggle>
                    <mat-datepicker #picker03></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <!--mat-form-field>
                      <input matInput [matDatepicker]="picker04" (click)="picker.open()" [(ngModel)]="fechaHasta"
                        placeholder="Fecha hasta">
                      <mat-datepicker-toggle matSuffix [for]="picker04"></mat-datepicker-toggle>
                      <mat-datepicker #picker04></mat-datepicker>
                    </mat-form-field-->
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="form-check-input" type="checkbox" value=""> Mostrar ya reservados
                      <span class="form-check-sign">
                        <span class="check"></span>
                      </span>
                    </label>
                  </div>
                </div>
              </div>
              <!--*******************-->
              <div class="row">
                <div class="col-md-6">
                  <div class="input-group no-border">
                    <input type="text" value="" class="form-control" [(ngModel)]="empleado" placeholder="Empleado">
                    <button mat-raised-button type="submit" class="btn btn-white btn-round btn-just-icon">
                      <i class="material-icons" data-toggle="modal" data-target="#exampleModal">search</i>
                      <div class="ripple-container"></div>
                    </button>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="input-group no-border">
                    <input type="text" value="" class="form-control" [(ngModel)]="paciente" placeholder="Paciente">
                    <button mat-raised-button type="submit" class="btn btn-white btn-round btn-just-icon">
                      <i class="material-icons" data-toggle="modal" data-target="#exampleModal2">search</i>
                      <div class="ripple-container"></div>
                    </button>
                  </div>
                </div>
              </div>
              <!--*******************-->
              <!--*******************-->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal"
                (click)="limpiarAgregar()">Cancelar</button>
              <button type="button" class="btn btn-primary" (click)="agregar()" data-dismiss="modal"
                [disabled]="((fecha && idEmpleado) && ( (flagEsHabilitar === 'S' && horaCierre && horaApertura && intervalo) || (flagEsHabilitar === 'N'))) ?false:true">
                Guardar</button>
            </div>
          </div>
        </div>
      </div>
      <!-------------------------END AGREGAR RESERVA--------------------------->
      <!------------------------- BUSCAR EMPLEADO--------------------------->
      <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Buscar empleado</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!--*******************-->
              <div class="row">
                <div class="input-group no-border">
                  <input type="text" value="" class="form-control" [(ngModel)]="buscarEmpleadoNombre"
                    placeholder="Nombre Empleado">
                  <button type="button" class="btn btn-info"
                    (click)="listarEmpleadosBuscador(buscarEmpleadoNombre)">Buscar</button>
                </div>
              </div>
              <!--*******GRILLA************-->
              <div class="table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>{{ tableBuscarEmpleado.headerRow[1] }}</th>
                      <th>{{ tableBuscarEmpleado.headerRow[2] }}</th>
                      <th>{{ tableBuscarEmpleado.headerRow[3] }}</th>
                      <th>{{ tableBuscarEmpleado.headerRow[4] }}</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let row of tableBuscarEmpleado.dataRows">
                      <td>{{row[1]}}</td>
                      <td>{{row[2]}}</td>
                      <td>{{row[3]}}</td>
                      <td>{{row[4]}}</td>
                      <td class="text-right">
                        <div class="form-check" (click)="empleadoSeleccionado(row[1],row[2])">
                          <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" [(ngModel)]="fila" value="">
                            <span class="form-check-sign">
                              <span class="check"></span>
                            </span>
                          </label>
                        </div>
                    </tr>
                  </tbody>
                </table>
              </div>
              <!--*******************-->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal"
                (click)="cancelarBuscarEmpleado()">Cancelar</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="aceptarEmpleado()"
                [disabled]="!fila">
                Aceptar</button>
            </div>
          </div>
        </div>
      </div>
      <!---------------------------------------------END BUSCAR EMPLEADO--------------------------------------->
      <!---------------------------------------------- BUSCAR CLIENTE ------------------------------------->
      <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Buscar cliente</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!--*******************-->
              <div class="row">
                <div class="input-group no-border">
                  <input type="text" value="" class="form-control" [(ngModel)]="buscarClienteNombre"
                    placeholder="Nombre Empleado">
                  <button type="button" class="btn btn-info"
                    (click)="listarClientesBuscador(buscarClienteNombre)">Buscar</button>
                </div>
              </div>
              <!--*******************-->
              <div class="col-md-12">
                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                  <!-- Checkbox Column -->
                  <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef>
                      <mat-checkbox (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()" 
                        [aria-label]="checkboxLabel()">
                      </mat-checkbox>
                    </th>
                    <td mat-cell *matCellDef="let row">
                      <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                      </mat-checkbox>
                    </td>
                  </ng-container>  
                  <!-- Position Column -->
                  <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef> Posición </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                  </ng-container>
                  <!-- Position Column -->
                  <ng-container matColumnDef="idCliente">
                    <th mat-header-cell *matHeaderCellDef> Id </th>
                    <td mat-cell *matCellDef="let element"> {{element.idCliente}} </td>
                  </ng-container>
  
                  <!-- Name Column -->
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef> Nombre </th>
                    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                  </ng-container>
  
                  <!-- Weight Column -->
                  <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> Email </th>
                    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                  </ng-container>  
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)">
                  </tr>
                </table>
                <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
              </div>                     
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal"
                (click)="cancelarBuscarCliente()">Cancelar</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="aceptarCliente()"
                [disabled]="!mostrarAceptar">
                Aceptar</button>
            </div>
          </div>
        </div>
      </div>
      <!-------------------------END BUSCAR CLIENTE--------------------------->
      <!------------------------- ELIMINAR RESERVA--------------------------->
      <div class="modal fade modal-warning" id="exampleModal3" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Está seguro de que desea eliminar este horario de atención?
              </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!--*******************-->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" (click)="eliminar()" data-dismiss="modal">
                Eliminar</button>
            </div>
          </div>
        </div>
      </div>
      <!-------------------------END ELIMINAR RESERVA--------------------------->
    </div>
    <!--<div class="container-fluid">-->
    <div class="row">
      <div class="col-md-12">
        <!--tabla sin buscador integrado-->
        <div class="card">
          <div class="card-header card-header-icon card-header-rose">
            <div class="card-icon">
              <i class="material-icons">assignment</i>
            </div>
            <h4 class="card-title ">Reserva Listado</h4>
          </div>
          <div class="card-body">
            <!--*******************-->
            <div class="row">
              <mat-accordion>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Opciones de filtrado
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <!--*********************-->
                  <div class="row">
                    <div class="col-md-6">
                      <mat-form-field>
                        <input matInput [matDatepicker]="pickerTr" (click)="picker.open()" [(ngModel)]="fechaDesde"
                          placeholder="Fecha desde">
                        <mat-datepicker-toggle matSuffix [for]="pickerTr"></mat-datepicker-toggle>
                        <mat-datepicker #pickerTr></mat-datepicker>
                      </mat-form-field>
                    </div>
                    <div class="col-md-6">
                      <mat-form-field>
                        <input matInput [matDatepicker]="pickerCu" (click)="pickerCu.open()" [(ngModel)]="fechaHasta"
                          placeholder="Fecha hasta">
                        <mat-datepicker-toggle matSuffix [for]="pickerCu"></mat-datepicker-toggle>
                        <mat-datepicker #pickerCu></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                  <!--*******************-->
                  <div class="row">
                    <div class="col-md-6">
                      <div class="input-group no-border">
                        <input type="text" value="" class="form-control" [(ngModel)]="empleadoNombre"
                          placeholder="Empleado">
                        <button mat-raised-button type="submit" class="btn btn-white btn-round btn-just-icon">
                          <i class="material-icons" data-toggle="modal" data-target="#exampleModal2">search</i>
                          <div class="ripple-container"></div>
                        </button>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="input-group no-border">
                        <input type="text" value="" class="form-control" [(ngModel)]="clienteNombre" placeholder="Paciente">
                        <button mat-raised-button type="submit" class="btn btn-white btn-round btn-just-icon">
                          <i class="material-icons" data-toggle="modal" data-target="#exampleModal3">search</i>
                          <div class="ripple-container"></div>
                        </button>
                      </div>
                    </div>
                  </div>
                  <!--*******************-->
                </mat-expansion-panel>
              </mat-accordion>

            </div>
            <!--*******************--->
            <div class="row">
              <button mat-raised-button class="btn btn-primary btn-sm" (click)="buscar()">Buscar</button>
              <button mat-raised-button class="btn btn-info btn-sm" (click)="limpiar()">Limpiar</button>
              <button mat-raised-button class="btn btn-fill btn-rose" data-toggle="modal"
                data-target="#exampleModal">Agregar</button>
            </div>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>{{ tableData1.headerRow[0] }}</th>
                    <th>{{ tableData1.headerRow[1] }}</th>
                    <th>{{ tableData1.headerRow[2] }}</th>
                    <th>{{ tableData1.headerRow[3] }}</th>
                    <th>{{ tableData1.headerRow[4] }}</th>
                    <th>{{ tableData1.headerRow[5] }}</th>
                    <th>{{ tableData1.headerRow[6] }}</th>
                    <th>{{ tableData1.headerRow[7] }}</th>
                    <th class="disabled-sorting text-right">{{ tableData1.headerRow[8] }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of tableData1.dataRows">
                    <td>{{row[0]}}</td>
                    <td>{{row[1]}}</td>
                    <td>{{row[2]}}</td>
                    <td>{{row[3]}}</td>
                    <td>{{row[4]}}</td>
                    <td>{{row[5]}}</td>
                    <td>{{row[6]}}</td>
                    <td>{{row[7]}}</td>
                    <td class="text-right">
                      <a href="javascript:void(0)" class="btn btn-link btn-warning btn-just-icon edit"
                        (click)="abrirModalModificar(row[0],row[1],row[2],row[3],row[4],row[5],row[6],row[7])"><i
                          class="material-icons">dvr</i></a>
                      <a href="javascript:void(0)" class="btn btn-link btn-danger btn-just-icon remove"
                        (click)="confirmarEliminar(row[0],row[1])"><i class="material-icons">delete</i></a>
                      <a href="javascript:void(0)" class="btn btn-link btn-danger btn-just-icon remove"
                        (click)="nuevaFicha(row[0],row[1])"><i class="material-icons">add</i></a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div *ngIf="listaReservas.length === 0">Sin datos</div>
          </div>
        </div>
        <!--end tabla sin buscador integrado-->
      </div>
      <!-- end col-md-12 -->
    </div>
    <!-- end row -->
  </div>
</div>